From 030e760867d892a21fb54dab6b60c2dcd27ac3ba Mon Sep 17 00:00:00 2001
From: Tilmann Meyer <me@atiltedtree.dev>
Date: Thu, 18 Nov 2021 15:39:47 +0100
Subject: [PATCH 05/23] angle: Build without X11 support if MOZ_X11 is disabled

---
 gfx/angle/moz.build.common | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/gfx/angle/moz.build.common b/gfx/angle/moz.build.common
index 31a14400db147..a83e4cfbf2ba4 100644
--- a/gfx/angle/moz.build.common
+++ b/gfx/angle/moz.build.common
@@ -11,6 +11,9 @@ if CONFIG['CC_TYPE'] in ('clang', 'clang-cl'):
 if CONFIG['INTEL_ARCHITECTURE']:
     CXXFLAGS += CONFIG['SSE2_FLAGS']
 
+if not CONFIG['MOZ_X11']:
+    DEFINES['EGL_NO_X11'] = True
+
 if CONFIG['MOZ_WIDGET_TOOLKIT'] == 'windows':
     DEFINES['ANGLE_IS_WIN'] = True
 
-- 
2.35.1

