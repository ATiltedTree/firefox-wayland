From 952632479a04167e62bce34281c49339eb772b75 Mon Sep 17 00:00:00 2001
From: Tilmann Meyer <me@atiltedtree.dev>
Date: Fri, 19 Nov 2021 15:06:58 +0100
Subject: [PATCH 18/19] make sure xul links with mozgtk

---
 widget/gtk/mozgtk/mozgtk.c | 2 ++
 widget/gtk/nsWindow.cpp    | 3 +++
 2 files changed, 5 insertions(+)

diff --git a/widget/gtk/mozgtk/mozgtk.c b/widget/gtk/mozgtk/mozgtk.c
index d7dbbc6fd9e3a..75c6f71832f97 100644
--- a/widget/gtk/mozgtk/mozgtk.c
+++ b/widget/gtk/mozgtk/mozgtk.c
@@ -6,6 +6,8 @@
 
 #include "mozilla/Types.h"
 
+MOZ_EXPORT void PleaseLinkWithMe() {}
+
 #ifdef MOZ_X11
 #  include <X11/Xlib.h>
 // Bug 1271100
diff --git a/widget/gtk/nsWindow.cpp b/widget/gtk/nsWindow.cpp
index e6aa6215c4d58..d69d47f9ef82b 100644
--- a/widget/gtk/nsWindow.cpp
+++ b/widget/gtk/nsWindow.cpp
@@ -120,6 +120,9 @@ using namespace mozilla::gfx;
 using namespace mozilla::layers;
 using namespace mozilla::widget;
 
+// Make sure mozgtk gets linked
+void PleaseLinkWithMe();
+
 // Don't put more than this many rects in the dirty region, just fluff
 // out to the bounding-box if there are more
 #define MAX_RECTS_IN_REGION 100
-- 
2.34.0

